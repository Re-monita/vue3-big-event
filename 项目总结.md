# é¡¹ç›®æ€»ç»“

# ä¸€ã€æ¶æ„è®¾è®¡

## pnpmåŒ…ç®¡ç†å™¨

1. å®‰è£…
    
    `npm install -g pnpm`
    
2. åˆ›å»ºé¡¹ç›®ï¼ˆä¸è¦åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºï¼‰
    
    `pnpm create vue`
    

## ESLint+prettier

1. å®‰è£…äº†æ’ä»¶ ESlintï¼Œå¼€å¯ä¿å­˜è‡ªåŠ¨ä¿®å¤
2. ç¦ç”¨äº†æ’ä»¶ Prettierï¼Œå¹¶å…³é—­ä¿å­˜è‡ªåŠ¨æ ¼å¼åŒ–
    
    ```json
    // ESlintæ’ä»¶ + Vscodeé…ç½® å®ç°è‡ªåŠ¨æ ¼å¼åŒ–ä¿®å¤
    "editor.codeActionsOnSave": {
        // å¼€å¯ä¿å­˜è‡ªåŠ¨ä¿®å¤
        "source.fixAll": true
    },
    // å…³é—­ä¿å­˜è‡ªåŠ¨æ ¼å¼åŒ–
    "editor.formatOnSave": false,		
    
    ```
    
3. é…ç½®æ–‡ä»¶ .eslintrc.cjs

```json
  rules: {
    'prettier/prettier': [
      'warn',
      {
        singleQuote: true, // å•å¼•å·
        semi: false, // æ— åˆ†å·
        printWidth: 80, // æ¯è¡Œå®½åº¦è‡³å¤š80å­—ç¬¦
        trailingComma: 'none', // ä¸åŠ å¯¹è±¡|æ•°ç»„æœ€åé€—å·
        endOfLine: 'auto' // æ¢è¡Œç¬¦å·ä¸é™åˆ¶ï¼ˆwin mac ä¸ä¸€è‡´ï¼‰
      }
    ],
    'vue/multi-word-component-names': [
      'warn',
      {
        ignores: ['index'] // vueç»„ä»¶åç§°å¤šå•è¯ç»„æˆï¼ˆå¿½ç•¥index.vueï¼‰
      }
    ],
    'vue/no-setup-props-destructure': ['off'], // å…³é—­ props è§£æ„çš„æ ¡éªŒï¼ˆpropsç»“æ„ä¼šä¸¢å¤±å“åº”å¼ï¼‰
    // ğŸ’¡ æ·»åŠ æœªå®šä¹‰å˜é‡é”™è¯¯æç¤ºï¼Œcreate-vue@3.6.3 å…³é—­ï¼Œè¿™é‡ŒåŠ ä¸Šæ˜¯ä¸ºäº†æ”¯æŒä¸‹ä¸€ä¸ªç« èŠ‚æ¼”ç¤ºã€‚
    'no-undef': 'error'
  }
```

## **åŸºäº husky  çš„ä»£ç æ£€æŸ¥å·¥ä½œæµ**

1. husky æ˜¯ä¸€ä¸ª git hooks å·¥å…·  ( gitçš„é’©å­å·¥å…·ï¼Œå¯ä»¥åœ¨ç‰¹å®šæ—¶æœºæ‰§è¡Œç‰¹å®šçš„å‘½ä»¤ )
2. ä½¿ç”¨
    1. gitåˆå§‹åŒ– git init
    2. åˆå§‹åŒ–husky 
        
        ```json
        pnpm dlx husky-init && pnpm install
        ```
        
3. é…ç½®ï¼šè§£å†³å†å²é—®é¢˜ï¼Œlint-stagedé…ç½®ï¼Œæš‚å­˜åŒºeslintæ ¡éªŒ
    1. å®‰è£…
        
        ```json
        pnpm i lint-staged -D
        ```
        
    2. é…ç½® `package.json`
        
        ```json
        {
          // ... çœç•¥ ...
          "lint-staged": {
            "*.{js,ts,vue}": [
              "eslint --fix"
            ]
          }
        }
        
        {
          "scripts": {
            // ... çœç•¥ ...
            "lint-staged": "lint-staged"
          }
        }
        ```
        
    3. ä¿®æ”¹ .husky/pre-commit æ–‡ä»¶ï¼Œå°† npm test ä¿®æ”¹ä¸º pnpm lint-stagedï¼Œæäº¤å‰ä¼šè§¦å‘çš„å‘½ä»¤ã€‚
        
        ```
        pnpm lint-staged
        ```
        

## sass å‰ç«¯å¼€å‘ä¸­å¸¸ç”¨çš„CSSé¢„å¤„ç†å™¨

```json
pnpm add sass -D
```

## å¼•å…¥element-uiç»„ä»¶åº“

1. å®‰è£…
    
    ```json
    pnpm add element-plus
    ```
    
2. è‡ªåŠ¨æŒ‰éœ€å¯¼å…¥
    1. å®‰è£…æ’ä»¶
        
        ```json
        pnpm add -D unplugin-vue-components unplugin-auto-import
        ```
        
    2. ç„¶åæŠŠä¸‹åˆ—ä»£ç æ’å…¥åˆ°ä½ çš„ `Vite` æˆ– `Webpack` çš„é…ç½®æ–‡ä»¶ä¸­
        
        ```jsx
        import AutoImport from 'unplugin-auto-import/vite'
        import Components from 'unplugin-vue-components/vite'
        import { ElementPlusResolver } from 'unplugin-vue-components/resolvers'
        
        // https://vitejs.dev/config/
        export default defineConfig({
          plugins: [
            ...
            AutoImport({
              resolvers: [ElementPlusResolver()]
            }),
            Components({
              resolvers: [ElementPlusResolver()]
            })
          ]
        })
        ```
        
3. element-plusçš„å›¾æ ‡åº“
    1. å®‰è£…
        
        ```jsx
        pnpm i @element-plus/icons-vue
        ```
        

## **Pinia - æ„å»ºç”¨æˆ·ä»“åº“ å’Œ æŒä¹…åŒ–**

1. å®‰è£…æ’ä»¶ pinia-plugin-persistedstate
    
    ```json
    pnpm add pinia-plugin-persistedstate -D
    ```
    
2. ä½¿ç”¨ main.js
    
    ```jsx
    import persist from 'pinia-plugin-persistedstate'
    ...
    app.use(createPinia().use(persist))
    ```
    
3. é…ç½® stores/user.jsï¼Œä½¿ç”¨æ–¹æ³•ï¼Œæ·»åŠ ç¬¬ä¸‰ä¸ªå‚æ•° persist: true
    
    ```jsx
    import { defineStore } from 'pinia'
    import { ref } from 'vue'
    
    // ç”¨æˆ·æ¨¡å—
    export const useUserStore = defineStore(
      'big-user',
      () => {
        const token = ref('') // å®šä¹‰ token
        const setToken = (t) => (token.value = t) // è®¾ç½® token
    
        return { token, setToken }
      },
      {
        persist: true // æŒä¹…åŒ–
      }
    )
    ```
    

## **axiosæ•°æ®äº¤äº’ - è¯·æ±‚å·¥å…·è®¾è®¡**

1. å®‰è£…
    
    ```json
    pnpm add axios
    ```
    
2. åŸºæœ¬é…ç½®ï¼Œæ–°å»º `utils/request.js` å°è£… axios æ¨¡å—
    
    ```jsx
    import { useUserStore } from '@/stores'
    import axios from 'axios'
    import router from '@/router'
    import { ElMessage } from 'element-plus'
    const baseURL = 'http://big-event-vue-api-t.itheima.net'
    
    const instance = axios.create({
      // 1. åŸºç¡€åœ°å€ï¼Œè¶…æ—¶æ—¶é—´
      baseURL,
      timeout: 100000
    })
    
    instance.interceptors.request.use(
      (config) => {
        // 2. æºå¸¦token
        const userStore = useUserStore()
        if (userStore.token) {
          config.headers.Authorization = userStore.token
        }
        return config
      },
      (err) => Promise.reject(err)
    )
    
    instance.interceptors.response.use(
      (res) => {
        // 4. æ‘˜å–æ ¸å¿ƒå“åº”æ•°æ®
        if (res.data.code === 0) {
          return res
        }
        // 3. å¤„ç†ä¸šåŠ¡å¤±è´¥
        ElMessage.error(res.data.message || 'æœåŠ¡å¼‚å¸¸')
        return Promise.reject(res.data)
      },
      (err) => {
        // å¤„ç†401é”™è¯¯ï¼Œæƒé™ä¸è¶³æˆ–tokenè¿‡å‰©=>æ‹¦æˆªåˆ°ç™»å½•é¡µé¢
        if (err.response?.status === 401) {
          router.push('/login')
        }
        // é”™è¯¯çš„é»˜è®¤æƒ…å†µ
        ElMessage.error(err.response.data.message || 'æœåŠ¡å¼‚å¸¸')
        // ElMessage.error(err.response.data.message || 'æœåŠ¡å¼‚å¸¸')
        return Promise.reject(err)
      }
    )
    
    export default instance
    export { baseURL }
    ```
    

## vue3é¡¹ç›®ç›®å½•ç»“æ„

```json
project-root/
â”œâ”€â”€ public/                     # é™æ€èµ„æºç›®å½•
â”‚   â”œâ”€â”€ favicon.ico             # ç½‘ç«™å›¾æ ‡
â”‚   â””â”€â”€ index.html              # åº”ç”¨çš„ HTML æ¨¡æ¿
â”œâ”€â”€ src/                        # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ assets/                 # é™æ€èµ„æºï¼ˆå›¾ç‰‡ã€æ ·å¼ç­‰ï¼‰
â”‚   â”‚   â”œâ”€â”€ images/             # å›¾ç‰‡æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ styles/             # å…¨å±€æ ·å¼
â”‚   â”‚   â””â”€â”€ icons/              # å›¾æ ‡èµ„æº
â”‚   â”œâ”€â”€ components/             # å…¨å±€å’Œé€šç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ BaseButton.vue      # ç¤ºä¾‹ï¼šåŸºç¡€æŒ‰é’®ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ BaseModal.vue       # ç¤ºä¾‹ï¼šåŸºç¡€æ¨¡æ€æ¡†ç»„ä»¶
â”‚   â”‚   â””â”€â”€ ...                 # æ›´å¤šåŸºç¡€ç»„ä»¶
â”‚   â”œâ”€â”€ composables/            # è‡ªå®šä¹‰ Hooksï¼ˆç»„åˆå¼ APIï¼‰
â”‚   â”‚   â””â”€â”€ useAuth.js          # ç¤ºä¾‹ï¼šè®¤è¯é€»è¾‘ Hook
â”‚   â”œâ”€â”€ layouts/                # é¡µé¢å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ DefaultLayout.vue   # é»˜è®¤å¸ƒå±€
â”‚   â”‚   â””â”€â”€ AuthLayout.vue      # è®¤è¯å¸ƒå±€
â”‚   â”œâ”€â”€ pages/                  # é¡µé¢ç»„ä»¶ï¼ˆè·¯ç”±å¯¹åº”çš„è§†å›¾ï¼‰
â”‚   â”‚   â”œâ”€â”€ Home.vue            # é¦–é¡µ
â”‚   â”‚   â”œâ”€â”€ About.vue           # å…³äºé¡µ
â”‚   â”‚   â””â”€â”€ ...                 # æ›´å¤šé¡µé¢
â”‚   â”œâ”€â”€ router/                 # è·¯ç”±é…ç½®
â”‚   â”‚   â””â”€â”€ index.js            # è·¯ç”±å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ store/                  # çŠ¶æ€ç®¡ç†ï¼ˆå¦‚ Vuex æˆ– Piniaï¼‰
â”‚   â”‚   â””â”€â”€ index.js            # çŠ¶æ€ç®¡ç†å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ utils/                  # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ formatDate.js       # ç¤ºä¾‹ï¼šæ ¼å¼åŒ–æ—¥æœŸå‡½æ•°
â”‚   â”œâ”€â”€ App.vue                 # åº”ç”¨çš„æ ¹ç»„ä»¶
â”‚   â”œâ”€â”€ main.js                 # é¡¹ç›®çš„å…¥å£æ–‡ä»¶
â”‚   â””â”€â”€ env/                    # ç¯å¢ƒå˜é‡
â”‚       â”œâ”€â”€ config.js           # ç¤ºä¾‹ï¼šç¯å¢ƒç›¸å…³é…ç½®
â”‚       â””â”€â”€ constants.js        # ç¤ºä¾‹ï¼šå…¨å±€å¸¸é‡
â”œâ”€â”€ tests/                      # æµ‹è¯•æ–‡ä»¶
â”‚   â”œâ”€â”€ unit/                   # å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ integration/            # é›†æˆæµ‹è¯•
â”‚   â””â”€â”€ e2e/                    # ç«¯åˆ°ç«¯æµ‹è¯•
â”œâ”€â”€ .env                        # ç¯å¢ƒå˜é‡æ–‡ä»¶ï¼ˆå¼€å‘ç¯å¢ƒï¼‰
â”œâ”€â”€ .env.production             # ç¯å¢ƒå˜é‡æ–‡ä»¶ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
â”œâ”€â”€ package.json                # é¡¹ç›®ä¾èµ–é…ç½®æ–‡ä»¶
â”œâ”€â”€ vite.config.js              # Vite é…ç½®æ–‡ä»¶
â””â”€â”€ README.md                   # é¡¹ç›®æ–‡æ¡£
```

# ç™»å½•ã€æ³¨å†Œé¡µé¢

## el-rowã€el-colå¸ƒå±€

1. é€šè¿‡Â `row`Â å’ŒÂ `col`Â ç»„ä»¶ï¼Œå¹¶é€šè¿‡ col ç»„ä»¶çš„Â `span`Â å±æ€§æˆ‘ä»¬å°±å¯ä»¥è‡ªç”±åœ°ç»„åˆå¸ƒå±€ã€‚

## el-formçš„ä½¿ç”¨

### è¡¨å•æ ¡éªŒ

1. model å±æ€§ç»‘å®š form æ•°æ®å¯¹è±¡
    
    ```jsx
    const formModel = ref({
      username: '',
      password: '',
      repassword: ''
    })
    
    <el-form :model="formModel" >
    ```
    
2. v-model ç»‘å®š form æ•°æ®å¯¹è±¡çš„å­å±æ€§
    
    ```jsx
    <el-input
      v-model="formModel.username"
      :prefix-icon="User"
      placeholder="è¯·è¾“å…¥ç”¨æˆ·å"
    ></el-input>
    ```
    
3. rules é…ç½®æ ¡éªŒè§„åˆ™
    
    ```jsx
    <el-form :rules="rules" >
        
    const rules = {
      username: [
        { required: true, message: 'è¯·è¾“å…¥ç”¨æˆ·å', trigger: 'blur' },
        { min: 5, max: 10, message: 'ç”¨æˆ·åå¿…é¡»æ˜¯5-10ä½çš„å­—ç¬¦', trigger: 'blur' }
      ],
      password: [
        { required: true, message: 'è¯·è¾“å…¥å¯†ç ', trigger: 'blur' },
        {
          pattern: /^\S{6,15}$/,
          message: 'å¯†ç å¿…é¡»æ˜¯6-15ä½çš„éç©ºå­—ç¬¦',
          trigger: 'blur'
        }
      ],
      repassword: [
        { required: true, message: 'è¯·å†æ¬¡è¾“å…¥å¯†ç ', trigger: 'blur' },
        {
          pattern: /^\S{6,15}$/,
          message: 'å¯†ç å¿…é¡»æ˜¯6-15çš„éç©ºå­—ç¬¦',
          trigger: 'blur'
        },
        {
          validator: (rule, value, callback) => {
            if (value !== formModel.value.password) {
              callback(new Error('ä¸¤æ¬¡è¾“å…¥å¯†ç ä¸ä¸€è‡´!'))
            } else {
              callback()
            }
          },
          trigger: 'blur'
        }
      ]
    }
    ```
    
4. prop ç»‘å®šæ ¡éªŒè§„åˆ™
    
    ```jsx
    <el-form-item prop="username">
      <el-input
        v-model="formModel.username"
        :prefix-icon="User"
        placeholder="è¯·è¾“å…¥ç”¨æˆ·å"
      ></el-input>
    </el-form-item>
    ```
    

### é¢„æ ¡éªŒ

1. é€šè¿‡ ref è·å–åˆ° è¡¨å•ç»„ä»¶ã€
    
    ```jsx
    const form = ref()
    
    <el-form ref="form">
    ```
    
2. æ³¨å†Œä¹‹å‰è¿›è¡Œæ ¡éªŒ
    
    ```jsx
    <el-button
      @click="register"
      class="button"
      type="primary"
      auto-insert-space
    >
      æ³¨å†Œ
    </el-button>
    
    const register = async () => {
      await form.value.validate()
      console.log('å¼€å§‹æ³¨å†Œè¯·æ±‚')
    }
    ```
    

## ç™»å½•æ‹¦æˆª

åªæœ‰ç™»å½•é¡µï¼Œå¯ä»¥æœªæˆæƒçš„æ—¶å€™è®¿é—®ï¼Œå…¶ä»–æ‰€æœ‰é¡µé¢ï¼Œéƒ½éœ€è¦å…ˆç™»å½•å†è®¿é—®

```jsx
// ç™»å½•è®¿é—®æ‹¦æˆª
router.beforeEach((to) => {
  const userStore = useUserStore()
  if (!userStore.token && to.path !== '/login') return '/login'
})
```

# é¦–é¡µæ¶å­æ­å»º

```jsx
el-container

- el-aside å·¦ä¾§
  - el-menu å·¦ä¾§è¾¹æ èœå•

- el-container  å³ä¾§
  - el-header  å³ä¾§å¤´éƒ¨
    - el-dropdown
  - el-main  å³ä¾§ä¸»ä½“
    - router-view
```

# æ–‡ç« åˆ†ç±»

## æ¶å­æ­å»º

1.  åŸºæœ¬ç»“æ„æ ·å¼ï¼Œç”¨åˆ°äº† el-card ç»„ä»¶
2. è€ƒè™‘åˆ°å¤šä¸ªé¡µé¢å¤ç”¨ï¼Œå°è£…æˆç»„ä»¶
    - props å®šåˆ¶æ ‡é¢˜
    - é»˜è®¤æ’æ§½ default å®šåˆ¶å†…å®¹ä¸»ä½“
    - å…·åæ’æ§½ extra å®šåˆ¶å¤´éƒ¨å³ä¾§é¢å¤–çš„æŒ‰é’®

## el-tableè¡¨æ ¼ä½¿ç”¨

1. å¦‚ä½•æ­å»ºè¡¨æ ¼UIï¼Œel-tableã€el-table-columnã€è‡ªå®šä¹‰è¡¨æ ¼é¡¹å†…å®¹ã€ç©ºè¡¨é¡¹æ˜¾ç¤ºel-empty
2. è¡¨æ ¼åŠ è½½UIï¼Œä½¿ç”¨v-loadingç»‘å®š

## el-dialogå¼¹çª—ä½¿ç”¨

æ·»åŠ  å’Œ ç¼–è¾‘ï¼Œå¯ä»¥å…±ç”¨ä¸€ä¸ªå¼¹å±‚ï¼Œæ‰€ä»¥å¯ä»¥å°†å¼¹å±‚å°è£…æˆä¸€ä¸ªç»„ä»¶

ç»„ä»¶å¯¹å¤–æš´éœ²ä¸€ä¸ªæ–¹æ³• open,  åŸºäº open çš„å‚æ•°ï¼Œåˆå§‹åŒ–è¡¨å•æ•°æ®ï¼Œå¹¶åˆ¤æ–­åŒºåˆ†æ˜¯æ·»åŠ  è¿˜æ˜¯ ç¼–è¾‘

1. open({ }) => æ·»åŠ æ“ä½œï¼Œæ·»åŠ è¡¨å•åˆå§‹åŒ–æ— æ•°æ®
2. open({ id: xx, ... }) => ç¼–è¾‘æ“ä½œï¼Œç¼–è¾‘è¡¨å•åˆå§‹åŒ–éœ€å›æ˜¾

```jsx
const open = async (row) => {
  dialogVisible.value = true
  formModel.value = { ...row }
}
```

1. æˆåŠŸåé€šçŸ¥çˆ¶ç»„ä»¶ç›‘å¬å›æ˜¾ï¼Œçˆ¶ç»„ä»¶ç›‘å¬successæ—¶é—´ï¼Œè¿›è¡Œè°ƒç”¨å›æ˜¾ï¼Œå³é‡æ–°è·å–ä¸€æ¬¡æ–‡ç« ä¿¡æ¯

# æ–‡ç« ç®¡ç†é¡µé¢

## ä¸­è‹±å›½é™…åŒ–å¤„ç†

åœ¨App.vueä¸­å¤„ç†

```jsx
<script setup>
import zh from 'element-plus/es/locale/lang/zh-cn.mjs'
</script>

<template>
  <!-- å›½é™…åŒ–å¤„ç† -->
  <el-config-provider :locale="zh">
    <router-view />
  </el-config-provider>
</template>
```

## ä¸Šä¼ æ–‡ä»¶

ä¸Šä¼ å¤´åƒæ—¶ï¼Œéœ€è¦åœ¨é¡µé¢æ˜¾ç¤ºé€‰ä¸­çš„å›¾ç‰‡ï¼Œå›¾ç‰‡åªæœ‰ç‚¹å‡»ä¸Šä¼ æ—¶æ‰ä¸Šä¼ 

1. å…³é—­è‡ªåŠ¨ä¸Šä¼ ï¼Œå‡†å¤‡ç»“æ„
    
    ```jsx
    import { Plus } from '@element-plus/icons-vue'
    
    <el-upload
      class="avatar-uploader"
      :auto-upload="false"
      :show-file-list="false"
      :on-change="onUploadFile"
    >
      <img v-if="imgUrl" :src="imgUrl" class="avatar" />
      <el-icon v-else class="avatar-uploader-icon"><Plus /></el-icon>
    </el-upload>
    ```
    
2. å‡†å¤‡æ•°æ® å’Œ é€‰æ‹©å›¾ç‰‡çš„å¤„ç†é€»è¾‘
    
    ```jsx
    const imgUrl = ref('')
    const onUploadFile = (uploadFile) => {
      imgUrl.value = URL.createObjectURL(uploadFile.raw)
      formModel.value.cover_img = uploadFile.raw
    }
    ```
    
    å›¾ç‰‡æ˜¾ç¤ºä½¿ç”¨`URL.createObjectURL(uploadFile.raw)`åˆ›å»ºå›¾ç‰‡çš„url
    
    éœ€è¦ä¸Šä¼ åˆ°æœåŠ¡å™¨çš„æ•°æ®å­˜åœ¨formModelé‡Œé¢
    

## å¯Œæ–‡æœ¬ç¼–è¾‘å™¨

1. å®‰è£…åŒ…
    
    `pnpm add @vueup/vue-quill@latest`
    
2. æ³¨å†Œæˆå±€éƒ¨ç»„ä»¶
    
    ```jsx
    import { QuillEditor } from '@vueup/vue-quill'
    import '@vueup/vue-quill/dist/vue-quill.snow.css'
    ```
    
3. é¡µé¢ä¸­ä½¿ç”¨ç»‘å®š
    
    ```jsx
    **<div class="editor">
      <quill-editor
        theme="snow"
        v-model:content="formModel.content"
        contentType="html"
      >
      </quill-editor>
    </div>**
    ```
    
4. å†…å®¹é‡ç½®ä»£ç 
    
    `editorRef.value.setHTML(â€™â€™)`